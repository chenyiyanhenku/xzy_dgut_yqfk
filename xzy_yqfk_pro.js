/*
cron 10 8 * * *  https://raw.githubusercontent.com/miranda0111/xzy_dgut_yqfk/main/xzy_yqfk.js

@miranda0111 xzy 4.10 东莞理工学院疫情打卡脚本
只适配了青龙，国外服务器打卡加强版
小白脚本，多账号有大bug，目前尝试多UA、更长等待时间、退出登录等，无果，等大佬给出指导
 
自行安装  axios  依赖；  自行安装  axios  依赖；  自行安装  axios  依赖；
青龙直接node中安装就行

========= 青龙 =========
变量格式：  
必填变量：export xzy_yqfk_ck='学号&密码@学号&密码'  学号和密码用&分割，多个账号用 @分割 
可选变量：export xzy_yffk_UA='你的UA'

还是不会的请百度或者QQ求助：QQ：591944012  无Q群

通知用青龙的，不适配单帐号单独通知
*/
/*Obfuscated by JShaman.com*/const axios=require('axios');const jsname='东莞理工学院疫情打卡脚本2022.4.10版本';const $=Env(jsname);const notify=$['isNode']()?require('./sendNotify'):'';const Notify=0x1;const debug=0x0;let xzy_yqfk_ck=($['isNode']()?process['env']['xzy_yqfk_ck']:$['getdata']('xzy_yqfk_ck'))||'';let UA=($['isNode']()?process['env']['xzy_yffk_UA']:$['getdata']('xzy_yffk_UA'))||'Mozilla/5.0\x20(Linux;\x20Android\x2010;\x20BAH3-W09)\x20AppleWebKit/537.36\x20(KHTML,\x20like\x20Gecko)\x20Chrome/98.0.4758.92\x20Safari/537.36';let xzy_yqfk_ckArr=[];let msg='';let user='';let pwd='';let Cookie='';let __token__='';let dgut_token='';let dgut_access_token='';let authorization='';let details='';!(async()=>{if(!await Envs())return;else{console['log']('\x0a\x0a=========================================\x20\x20\x20\x20脚本执行\x20-\x20北京时间(UTC+8)：'+new Date(new Date()['getTime']()+new Date()['getTimezoneOffset']()*0x3c*0x3e8+0x8*0x3c*0x3c*0x3e8)['toLocaleString']()+'\x20=========================================\x0a');await wyy();await $['wait'](0x2*0x3e8);console['log']('\x0a===================\x20共找到\x20'+xzy_yqfk_ckArr['length']+'\x20个账号\x20===================');if(debug){console['log']('【debug】\x20这是你的账号数组:\x0a\x20'+xzy_yqfk_ckArr);}for(let _0xe13212=0x0;_0xe13212<xzy_yqfk_ckArr['length'];_0xe13212++){let _0x51cf83=_0xe13212+0x1;console['log']('\x0a=========\x20开始【第\x20'+_0x51cf83+'\x20个账号】=========\x0a');data=xzy_yqfk_ckArr[_0xe13212]['split']('&');user=data[0x0];pwd=data[0x1];Cookie='';__token__='';dgut_token='';dgut_access_token='';request_url={'url':'','headers':{}};details='';if(debug){console['log']('\x0a\x20【debug】\x20这是你第\x20'+_0x51cf83+'\x20账号信息:\x0a\x20user:'+user+'\x0a');}await retry(login_info,0x3a98)['then'](_0xa2ed4e=>{console['log']('res->',_0xa2ed4e);});await retry(login_token_info,0x4e20)['then'](_0x57a949=>{console['log']('res->',_0x57a949);});await $['wait'](0x2*0x3e8);await retry(getLink,0x4e20)['then'](_0x515f5d=>{console['log']('res->',_0x515f5d);});await $['wait'](0x2*0x3e8);await retry(get_access_token,0x4e20)['then'](_0x2b5507=>{console['log']('res->',_0x2b5507);});await $['wait'](0x2*0x3e8);await retry(getBaseInfo,0x4e20)['then'](_0x22eb62=>{console['log']('res->',_0x22eb62);});await $['wait'](0x2*0x3e8);await $['wait'](0x2*0x3e8);await submit();await $['wait'](0x2*0x3e8);await $['wait'](0x2*0x3e8);await logout_info();await $['wait'](0x2*0x3e8);await logout_info();await $['wait'](0x2*0x3e8);await $['wait'](0x2*0x3e8);await SendMsg(msg);}}})()['catch'](_0x3109c4=>$['logErr'](_0x3109c4))['finally'](()=>$['done']());async function Envs(){if(xzy_yqfk_ck){if(xzy_yqfk_ck['indexOf']('@')!=-0x1){xzy_yqfk_ck['split']('@')['forEach'](_0x3c24d8=>{xzy_yqfk_ckArr['push'](_0x3c24d8);});}else{xzy_yqfk_ckArr['push'](xzy_yqfk_ck);}}else{console['log']('\x0a\x20【'+$['name']+'】：未填写变量\x20xzy_yqfk_ck');return;}return!![];}async function SendMsg(_0x8c559c){if(!_0x8c559c)return;if(Notify>0x0){if($['isNode']()){var _0x4422dc=require('./sendNotify');await _0x4422dc['sendNotify']($['name'],_0x8c559c);}else{$['msg'](_0x8c559c);}}else{console['log'](_0x8c559c);}}function randomString(_0x45389d){_0x45389d=_0x45389d||0x20;var _0x2b3559='QWERTYUIOPASDFGHJKLZXCVBNM1234567890',_0x2a75e7=_0x2b3559['length'],_0x58e046='';for(i=0x0;i<_0x45389d;i++)_0x58e046+=_0x2b3559['charAt'](Math['floor'](Math['random']()*_0x2a75e7));return _0x58e046;}function randomInt(_0x5562f0,_0x578058){return Math['round'](Math['random']()*(_0x578058-_0x5562f0)+_0x5562f0);}function wyy(_0x2edb13=0x3*0x3e8){return new Promise(_0x240381=>{let _0x51cf33={'url':'https://keai.icu/apiwyy/api'};$['get'](_0x51cf33,async(_0x134a64,_0x263901,_0x32dbb6)=>{try{_0x32dbb6=JSON['parse'](_0x32dbb6);console['log']('\x0a\x20【网抑云时间】:\x20'+_0x32dbb6['content']+'\x20\x20by--'+_0x32dbb6['music']);}catch(_0x3c4a96){$['logErr'](_0x3c4a96,_0x263901);}finally{_0x240381();}},_0x2edb13);});}const timeOut=_0x36be6e=>{return new Promise((_0x4ad9aa,_0x5d85d9)=>{setTimeout(()=>{_0x5d85d9(![]);},_0x36be6e);});};function retry(_0x5079df,_0xbc11e){return new Promise((_0x1899ab,_0x3326fe)=>{Promise['race']([_0x5079df(),timeOut(_0xbc11e)])['then'](_0x5819a5=>{_0x1899ab(_0x5819a5);})['catch'](_0x3fd223=>{_0x3326fe('race\x20内部超时');});})['catch'](_0x37043a=>{console['log'](_0x37043a);return retry(_0x5079df,_0xbc11e);});}const login_info=function(_0x18d298=0xa*0x3e8){request_url['url']='https://yqfk-daka.dgut.edu.cn/login';request_url['headers']={'Accept':'application/json,\x20text/plain,\x20*/*','Accept-Encoding':'gzip,\x20deflate,\x20br','Connection':'keep-alive','Host':'yqfk-daka-api.dgut.edu.cn','Referer':'https://yqfk-daka.dgut.edu.cn/','User-Agent':UA,'sec-ch-ua-platform':'\x22Android\x22'};return new Promise(_0x281802=>{if(debug){console['log']('\x0a\x20【debug】===============\x20这是\x20login_info\x20请求\x20url\x20===============');console['log'](request_url);}$['get'](request_url,async(_0x40f934,_0x27dfee,_0x263a86)=>{try{if(debug){console['log']('\x0a\x0a\x20【debug】===============这是\x20login_info\x20返回data==============');console['log'](_0x263a86);console['log']('======');console['log'](JSON['parse'](_0x263a86));}}catch(_0x479082){console['log'](_0x479082);}finally{_0x281802();}},_0x18d298);});};const login_token_info=function(_0x22501e=0x14*0x3e8){request_url['url']='https://cas.dgut.edu.cn/home/Oauth/getToken/appid/yqfkdaka/state/%2Fhome.html';request_url['headers']={'Accept':'text/html,application/xhtml','Accept-Encoding':'gzip,\x20deflate,\x20br','Connection':'keep-alive','Host':'cas.dgut.edu.cn','Referer':'https://yqfk-daka.dgut.edu.cn/','User-Agent':UA,'sec-ch-ua-platform':'\x22Android\x22','Cache-Control':'no-cache'};return new Promise(_0x36ea95=>{if(debug){console['log']('\x0a\x20【debug】===============\x20这是\x20login_token_info\x20请求\x20url\x20===============');console['log'](request_url);}$['get'](request_url,async(_0x3d637d,_0x193f60,_0x2dd3e7)=>{try{if(debug){console['log']('\x0a\x0a\x20【debug】===============这是\x20login_token_info\x20返回data==============');console['log'](_0x2dd3e7);console['log']('======');}if(_0x193f60['status']==0xc8){console['log']('\x0a=========\x20检测是否存在token\x20=========\x0a');let _0x358717=new RegExp(/token/g);if(_0x358717['test'](_0x2dd3e7)!=![]){__token__=_0x2dd3e7['match'](/(?<=token\s*=\s*")\S*(?=")/)[0x0];console['log']('\x0a=========\x20获取token成功\x20=========\x0a');}else{console['log']('\x0a=========\x20token不存在等待5分钟，尝试重新获取token\x20=========\x0a');await $['wait'](0x5*0x3e8);await logout_info();await $['wait'](0x5*0x3c*0x3e8);await retry(login_token_info,0x4e20)['then'](_0x5aef8c=>{console['log']('res->',_0x5aef8c);});}}let _0x573d7c=_0x193f60['headers']['set-cookie'];_0x573d7c=_0x573d7c['toString']();Cookie=_0x573d7c['match'](/(?<=PHPSESSID=)\S*(?=;)/)[0x0];Cookie='last_oauth_appid=yqfkdaka;\x20last_oauth_state=home;\x20PHPSESSID='+Cookie;}catch(_0x5de1e1){console['log'](_0x5de1e1);}finally{_0x36ea95();}},_0x22501e);});};const getLink=function(_0x183c98=0x3*0x3e8){request_url={'url':'https://cas.dgut.edu.cn/home/Oauth/getToken/appid/yqfkdaka/state/%2Fhome.html','headers':{'Accept':'application/json,\x20text/javascript,\x20*/*;\x20q=0.01','Accept-Encoding':'gzip,\x20deflate,\x20br','Accept-Language':'zh-CN,zh;q=0.9','Connection':'keep-alive','Content-Type':'application/x-www-form-urlencoded;\x20charset=UTF-8','Host':'cas.dgut.edu.cn','Origin':'http://cas.dgut.edu.cn','Referer':'https://cas.dgut.edu.cn/home/Oauth/getToken/appid/yqfkdaka/state/%2Fhome.html','User-Agent':UA}};request_url['headers']['Cookie']=Cookie;request_url['body']='username='+user+'&password='+pwd+'&__token__='+__token__+'&wechat_verify=';return new Promise(_0x39fab4=>{if(debug){console['log']('\x0a\x20【debug】===============\x20这是\x20getLink\x20请求\x20url\x20===============');console['log'](request_url);}$['post'](request_url,async(_0x4908f9,_0x9c4e92,_0x17fe0d)=>{try{if(debug){console['log']('\x0a\x0a\x20【debug】===============这是\x20getLink\x20返回data==============');console['log'](_0x17fe0d);console['log']('======');console['log'](JSON['parse'](_0x17fe0d));console['log']('======');}let _0x403f19=JSON['parse'](_0x17fe0d);if(_0x403f19['code']==0x1){console['log']('\x0a=========\x20尝试登录：\x20'+_0x403f19['message']+'\x20=========\x0a');dgut_token=_0x17fe0d['match'](/(?<=token=)\S*(?=&)/)[0x0];console['log']('\x0a=========\x20获取dgut_token：\x20'+dgut_token+'\x20=========\x0a');msg+='\x0a\x20【'+user+'】尝试登录：'+_0x403f19['message']+'\x20🎉\x20\x20\x0a';}else{console['log']('\x0a=========\x20登录失败，请检查\x20=========\x0a');}}catch(_0x4193d8){console['log'](_0x4193d8);}finally{_0x39fab4();}},_0x183c98);});};const get_access_token=function(_0x36058a=0x3*0x3e8){request_url['url']='https://yqfk-daka-api.dgut.edu.cn/auth';request_url['headers']={'Host':'yqfk-daka-api.dgut.edu.cn','Connection':'keep-alive','Content-Length':'70','Accept':'application/json,\x20text/plain,\x20*/*','Origin':'https://yqfk-daka.dgut.edu.cn','User-Agent':UA,'Content-Type':'application/json','Referer':'https://yqfk-daka.dgut.edu.cn/login/dgut?token='+dgut_token+'&state=home','Accept-Encoding':'gzip,\x20deflate','Accept-Language':'zh-CN,en-US;q=0.8'};request_url['body']='{\x22token\x22:\x22'+dgut_token+'\x22,\x22state\x22:\x22home\x22}\x0d\x0a';return new Promise(_0x2b16ec=>{if(debug){console['log']('\x0a\x20【debug】===============\x20这是\x20get_access_token\x20请求\x20url\x20===============');console['log'](request_url);}$['post'](request_url,async(_0x49bb3d,_0x2626f6,_0x4155ca)=>{try{if(debug){console['log']('\x0a\x0a\x20【debug】===============这是\x20get_access_token\x20返回data==============');console['log'](_0x4155ca);console['log']('======');console['log'](JSON['parse'](_0x4155ca));}let _0x7f6828=JSON['parse'](_0x4155ca);if(_0x7f6828['access_token']!=undefined){dgut_access_token=_0x7f6828['access_token'];console['log']('\x0a=========\x20获取access_token：'+dgut_access_token+'\x20=========\x0a');}else console['log']('\x0a=========\x20登录失败，请检查\x20=========\x0a');}catch(_0x10f379){console['log'](_0x10f379);}finally{_0x2b16ec();}},_0x36058a);});};const getBaseInfo=function(_0x11b67c=0x3*0x3e8){authorization='Bearer\x20'+dgut_access_token;let _0x547183={'url':'https://yqfk-daka-api.dgut.edu.cn/record/','headers':{'Host':'yqfk-daka-api.dgut.edu.cn','Connection':'keep-alive','Accept':'application/json,\x20text/plain,\x20*/*','Origin':'https://yqfk-daka.dgut.edu.cn','Authorization':authorization,'User-Agent':UA,'Referer':'https://yqfk-daka.dgut.edu.cn/','Accept-Encoding':'gzip,\x20deflate','Accept-Language':'zh-CN,en-US;q=0.8'}};return new Promise(_0x3ec990=>{if(debug){console['log']('\x0a\x20【debug】===============\x20这是\x20getBaseInfo\x20请求\x20url\x20===============');console['log'](request_url);}$['get'](_0x547183,async(_0x5d3313,_0x4b924f,_0x23020d)=>{try{if(debug){console['log']('\x0a\x0a\x20【debug】===============这是\x20getBaseInfo\x20返回data==============');console['log'](_0x23020d);console['log']('======');console['log'](JSON['parse'](_0x23020d));}let _0x198321=JSON['parse'](_0x23020d);details=_0x198321;if(_0x198321['message']!=undefined){console['log'](_0x198321['message']);msg+='\x0a\x20【'+user+'】'+_0x198321['message']+'\x20了🎉\x20\x20\x0a';}}catch(_0x40adbe){console['log'](_0x40adbe);}finally{_0x3ec990();}},_0x11b67c);});};function submit(_0x1791af=0x3*0x3e8){details=details['user_data'];let _0x43be26=require('axios');let _0x263cd2='{\x22data\x22:{\x22submit_time\x22:\x22'+details['submit_time']+'\x22,\x22name\x22:\x22'+details['name']+'\x22,\x22faculty_name\x22:\x22'+details['faculty_name']+'\x22,\x22class_name\x22:\x22'+details['class_name']+'\x22,\x22username\x22:\x22'+details['username']+'\x22,\x22card_number\x22:\x22'+details['card_number']+'\x22,\x22identity_type\x22:\x22'+details['identity_type']+'\x22,\x22remark\x22:\x22'+details['remark']+'\x22,\x22tel\x22:\x22'+details['tel']+'\x22,\x22body_temperature\x22:\x22'+details['body_temperature']+'\x22,\x22connect_person\x22:\x22'+details['connect_person']+'\x22,\x22connect_tel\x22:\x22'+details['connect_tel']+'\x22,\x22family_address_detail\x22:\x22'+details['family_address_detail']+'\x22,\x22current_country\x22:\x22'+details['current_country']+'\x22,\x22current_province\x22:\x22'+details['current_province']+'\x22,\x22current_city\x22:\x22'+details['current_city']+'\x22,\x22current_district\x22:\x22'+details['current_district']+'\x22,\x22latest_acid_test\x22:\x22'+details['latest_acid_test']+'\x22,\x22huji_region\x22:[\x22'+details['huji_region'][0x0]+'\x22,\x22'+details['huji_region'][0x1]+'\x22,\x22'+details['huji_region'][0x2]+'\x22,\x22'+details['huji_region'][0x3]+'\x22],\x22family_region\x22:[\x22'+details['family_region'][0x0]+'\x22,\x22'+details['family_region'][0x1]+'\x22,\x22'+details['family_region'][0x2]+'\x22,\x22'+details['family_region'][0x3]+'\x22],\x22jiguan_region\x22:[\x22'+details['jiguan_region'][0x0]+'\x22,\x22'+details['jiguan_region'][0x1]+'\x22,\x22'+details['jiguan_region'][0x2]+'\x22,\x22'+details['jiguan_region'][0x3]+'\x22],\x22current_region\x22:[\x22'+details['current_region'][0x0]+'\x22,\x22'+details['current_region'][0x1]+'\x22,\x22'+details['current_region'][0x2]+'\x22,\x22'+details['current_region'][0x3]+'\x22],\x22huji_region_name\x22:\x22'+details['huji_region_name']+'\x22,\x22family_region_name\x22:\x22'+details['family_region_name']+'\x22,\x22jiguan_region_name\x22:\x22'+details['jiguan_region_name']+'\x22,\x22current_region_name\x22:\x22'+details['current_region_name']+'\x22,\x22card_type\x22:\x22'+details['card_type']+'\x22,\x22campus\x22:'+details['campus']+',\x22health_situation\x22:'+details['health_situation']+',\x22have_gone_important_area\x22:'+details['have_gone_important_area']+',\x22have_contact_hubei_people\x22:'+details['have_contact_hubei_people']+',\x22have_contact_illness_people\x22:'+details['have_contact_illness_people']+',\x22have_isolation_in_dg\x22:'+details['have_isolation_in_dg']+',\x22is_in_dg\x22:'+details['is_in_dg']+',\x22have_go_out\x22:'+details['have_go_out']+',\x22is_specific_people\x22:'+details['is_specific_people']+',\x22health_code_status\x22:'+details['health_code_status']+',\x22in_controllerd_area\x22:'+details['in_controllerd_area']+',\x22completed_vaccination\x22:'+details['completed_vaccination']+',\x22is_in_school\x22:'+details['is_in_school']+',\x22have_stay_area\x22:'+details['have_stay_area']+',\x22family_situation\x22:['+details['family_situation']+'],\x22gps_country\x22:\x22'+details['gps_country']+'\x22,\x22gps_province\x22:\x22'+details['gps_province']+'\x22,\x22gps_city\x22:\x22'+details['gps_city']+'\x22,\x22gps_district\x22:\x22'+details['gps_district']+'\x22,\x22gps_country_name\x22:\x22'+details['gps_country_name']+'\x22,\x22gps_province_name\x22:\x22'+details['gps_province_name']+'\x22,\x22gps_city_name\x22:\x22'+details['gps_city_name']+'\x22,\x22gps_district_name\x22:\x22'+details['gps_district_name']+'\x22,\x22gps_address_name\x22:\x22'+details['gps_address_name']+'\x22}}';let _0x3b79a3={'method':'post','url':'https://yqfk-daka-api.dgut.edu.cn/record/','headers':{'Host':'yqfk-daka-api.dgut.edu.cn','Connection':'keep-alive','Accept':'application/json,\x20text/plain,\x20*/*','Origin':'https://yqfk-daka.dgut.edu.cn','Authorization':authorization,'User-Agent':UA,'Content-Type':'application/json','Referer':'https://yqfk-daka.dgut.edu.cn/','Accept-Encoding':'gzip,\x20deflate','Accept-Language':'zh-CN,en-US;q=0.8'},'data':_0x263cd2};if(debug){console['log']('\x0a\x20【debug】===============\x20这是\x20submit\x20请求\x20url\x20===============');console['log'](_0x3b79a3);}_0x43be26(_0x3b79a3)['then'](function(_0x56bf51){if(debug){console['log']('===========');console['log'](_0x56bf51);console['log']('===========');console['log'](_0x56bf51['data']);}if(_0x56bf51['status']==0xc8){let _0x3e3623=_0x56bf51['data'];if(_0x3e3623!=undefined){console['log'](_0x3e3623);console['log']('\x0a\x20【'+user+'\x20success:'+_0x3e3623['message']+'\x20🎉\x20\x20\x0a');msg+='\x0a\x20【'+user+'】打卡明细：'+_0x3e3623['message']+'\x20🎉\x20\x20\x0a';console['log']('===========');console['log']('===========');console['log']('===========');}}})['catch'](function(_0x4c7796){if(debug){console['log'](_0x4c7796);console['log']('===========');console['log'](_0x4c7796['response']);console['log']('===========');if(_0x4c7796['response']['data']!=undefined){console['log'](_0x4c7796['response']['data']);console['log']('===========');console['log'](_0x4c7796['response']['data']['message']);}}if(_0x4c7796['response']['data']!=undefined){let _0x2e43cb=_0x4c7796['response']['data']['message'];if(_0x2e43cb!=undefined){console['log'](_0x2e43cb);console['log']('\x0a\x20【'+user+'】error:'+_0x2e43cb+'\x20🎉\x20\x20\x0a');msg+='\x0a\x20【'+user+'】打卡详情：'+_0x2e43cb+'\x20🎉\x20\x20\x0a____________________________________________________________________________________________________________________________________________________________________________________________________';}}else{msg+='出错';}});}const logout_info=function(_0x49acc6=0xa*0x3e8){let _0x4155d8={'method':'get','url':'https://yqfk-daka-api.dgut.edu.cn/logout','headers':{'Host':'\x20yqfk-daka-api.dgut.edu.cn','Connection':'\x20keep-alive','sec-ch-ua':'\x20\x22\x20Not\x20A;Brand\x22;v=\x2299\x22,\x20\x22Chromium\x22;v=\x2298\x22','Accept':'\x20application/json,\x20text/plain,\x20*/*','Authorization':authorization,'User-Agent':UA,'Origin':'\x20https://yqfk-daka.dgut.edu.cn','Sec-Fetch-Site':'\x20same-site','Sec-Fetch-Mode':'\x20cors','Sec-Fetch-Dest':'\x20empty','Referer':'\x20https://yqfk-daka.dgut.edu.cn/','Accept-Encoding':'\x20gzip,\x20deflate,\x20br','Accept-Language':'\x20zh-CN,zh;q=0.9'}};axios(_0x4155d8)['then'](function(_0x2edbd4){let _0x3d7cac=_0x2edbd4;if(_0x3d7cac!=undefined){console['log'](_0x3d7cac);_0x3d7cac=_0x2edbd4['data']['data'];console['log']('\x0a\x20【'+user+'\x20success:'+_0x3d7cac+'\x20🎉\x20\x20\x0a');msg+='\x0a\x20【'+user+'】'+_0x3d7cac+'\x20🎉\x20\x20\x0a';}})['catch'](function(_0x5c27d2){console['log'](_0x5c27d2);let _0x5bb559=_0x5c27d2['response']['data'];if(_0x5bb559!=undefined){console['log'](_0x5bb559);console['log']('\x0a\x20【'+user+'\x20error:'+_0x5bb559+'\x20🎉\x20\x20\x0a');msg+='\x0a\x20【'+user+'】'+_0x5bb559+'\x20🎉\x20\x20\x0a';}});};function Env(_0x4dda18,_0x461f8a){'undefined'!=typeof process&&JSON['stringify'](process['env'])['indexOf']('GITHUB')>-0x1&&process['exit'](0x0);class _0x2536e1{constructor(_0x3c8161){this['env']=_0x3c8161;}['send'](_0x3de8f7,_0x594464='GET'){_0x3de8f7='string'==typeof _0x3de8f7?{'url':_0x3de8f7}:_0x3de8f7;let _0x538356=this['get'];return'POST'===_0x594464&&(_0x538356=this['post']),new Promise((_0x14c516,_0x126637)=>{_0x538356['call'](this,_0x3de8f7,(_0x480e90,_0x51f866,_0x9f09ce)=>{_0x480e90?_0x126637(_0x480e90):_0x14c516(_0x51f866);});});}['get'](_0xee63ae){return this['send']['call'](this['env'],_0xee63ae);}['post'](_0x5e025a){return this['send']['call'](this['env'],_0x5e025a,'POST');}}return new class{constructor(_0x3206bb,_0x25f035){this['name']=_0x3206bb,this['http']=new _0x2536e1(this),this['data']=null,this['dataFile']='box.dat',this['logs']=[],this['isMute']=!0x1,this['isNeedRewrite']=!0x1,this['logSeparator']='\x0a',this['startTime']=new Date()['getTime'](),Object['assign'](this,_0x25f035),this['log']('','🔔'+this['name']+',\x20开始!');}['isNode'](){return'undefined'!=typeof module&&!!module['exports'];}['isQuanX'](){return'undefined'!=typeof $task;}['isSurge'](){return'undefined'!=typeof $httpClient&&'undefined'==typeof $loon;}['isLoon'](){return'undefined'!=typeof $loon;}['toObj'](_0x241c8f,_0x4db270=null){try{return JSON['parse'](_0x241c8f);}catch{return _0x4db270;}}['toStr'](_0x41f45a,_0x45e689=null){try{return JSON['stringify'](_0x41f45a);}catch{return _0x45e689;}}['getjson'](_0x1ac0f0,_0x5dc7a6){let _0x291c97=_0x5dc7a6;const _0x761eec=this['getdata'](_0x1ac0f0);if(_0x761eec)try{_0x291c97=JSON['parse'](this['getdata'](_0x1ac0f0));}catch{}return _0x291c97;}['setjson'](_0x30eb4d,_0x2f5863){try{return this['setdata'](JSON['stringify'](_0x30eb4d),_0x2f5863);}catch{return!0x1;}}['getScript'](_0x4780fd){return new Promise(_0x1fd26f=>{this['get']({'url':_0x4780fd},(_0x583140,_0x3c8a42,_0x27c90e)=>_0x1fd26f(_0x27c90e));});}['runScript'](_0x40b9ee,_0x1c8bd1){return new Promise(_0x2f8412=>{let _0x4a23b9=this['getdata']('@chavy_boxjs_userCfgs.httpapi');_0x4a23b9=_0x4a23b9?_0x4a23b9['replace'](/\n/g,'')['trim']():_0x4a23b9;let _0x285e4d=this['getdata']('@chavy_boxjs_userCfgs.httpapi_timeout');_0x285e4d=_0x285e4d?0x1*_0x285e4d:0x14,_0x285e4d=_0x1c8bd1&&_0x1c8bd1['timeout']?_0x1c8bd1['timeout']:_0x285e4d;const [_0x5a7f37,_0x376089]=_0x4a23b9['split']('@'),_0xa7564f={'url':'http://'+_0x376089+'/v1/scripting/evaluate','body':{'script_text':_0x40b9ee,'mock_type':'cron','timeout':_0x285e4d},'headers':{'X-Key':_0x5a7f37,'Accept':'*/*'}};this['post'](_0xa7564f,(_0x4ea34b,_0x2730b1,_0x2de680)=>_0x2f8412(_0x2de680));})['catch'](_0x2e613f=>this['logErr'](_0x2e613f));}['loaddata'](){if(!this['isNode']())return{};{this['fs']=this['fs']?this['fs']:require('fs'),this['path']=this['path']?this['path']:require('path');const _0x2a060f=this['path']['resolve'](this['dataFile']),_0x94bb=this['path']['resolve'](process['cwd'](),this['dataFile']),_0x44a86a=this['fs']['existsSync'](_0x2a060f),_0x2b51a6=!_0x44a86a&&this['fs']['existsSync'](_0x94bb);if(!_0x44a86a&&!_0x2b51a6)return{};{const _0x3dee88=_0x44a86a?_0x2a060f:_0x94bb;try{return JSON['parse'](this['fs']['readFileSync'](_0x3dee88));}catch(_0x4cdd93){return{};}}}}['writedata'](){if(this['isNode']()){this['fs']=this['fs']?this['fs']:require('fs'),this['path']=this['path']?this['path']:require('path');const _0x440163=this['path']['resolve'](this['dataFile']),_0x52496d=this['path']['resolve'](process['cwd'](),this['dataFile']),_0x225155=this['fs']['existsSync'](_0x440163),_0x3b4179=!_0x225155&&this['fs']['existsSync'](_0x52496d),_0x3d397a=JSON['stringify'](this['data']);_0x225155?this['fs']['writeFileSync'](_0x440163,_0x3d397a):_0x3b4179?this['fs']['writeFileSync'](_0x52496d,_0x3d397a):this['fs']['writeFileSync'](_0x440163,_0x3d397a);}}['lodash_get'](_0xfb4e95,_0x2798e4,_0xa337f1){const _0x476b1b=_0x2798e4['replace'](/\[(\d+)\]/g,'.$1')['split']('.');let _0x5df194=_0xfb4e95;for(const _0x411d6f of _0x476b1b)if(_0x5df194=Object(_0x5df194)[_0x411d6f],void 0x0===_0x5df194)return _0xa337f1;return _0x5df194;}['lodash_set'](_0x199371,_0x668d22,_0x52726c){return Object(_0x199371)!==_0x199371?_0x199371:(Array['isArray'](_0x668d22)||(_0x668d22=_0x668d22['toString']()['match'](/[^.[\]]+/g)||[]),_0x668d22['slice'](0x0,-0x1)['reduce']((_0x14ba79,_0x1f9cbd,_0x5411df)=>Object(_0x14ba79[_0x1f9cbd])===_0x14ba79[_0x1f9cbd]?_0x14ba79[_0x1f9cbd]:_0x14ba79[_0x1f9cbd]=Math['abs'](_0x668d22[_0x5411df+0x1])>>0x0==+_0x668d22[_0x5411df+0x1]?[]:{},_0x199371)[_0x668d22[_0x668d22['length']-0x1]]=_0x52726c,_0x199371);}['getdata'](_0x45bb5e){let _0x5573b0=this['getval'](_0x45bb5e);if(/^@/['test'](_0x45bb5e)){const [,_0x5e09bf,_0x236f9f]=/^@(.*?)\.(.*?)$/['exec'](_0x45bb5e),_0x1e8ac3=_0x5e09bf?this['getval'](_0x5e09bf):'';if(_0x1e8ac3)try{const _0x40d904=JSON['parse'](_0x1e8ac3);_0x5573b0=_0x40d904?this['lodash_get'](_0x40d904,_0x236f9f,''):_0x5573b0;}catch(_0xf90b3){_0x5573b0='';}}return _0x5573b0;}['setdata'](_0x1be063,_0x56eacf){let _0x3202a4=!0x1;if(/^@/['test'](_0x56eacf)){const [,_0x3c486b,_0x3be89f]=/^@(.*?)\.(.*?)$/['exec'](_0x56eacf),_0x19b96e=this['getval'](_0x3c486b),_0x3e0ec6=_0x3c486b?'null'===_0x19b96e?null:_0x19b96e||'{}':'{}';try{const _0x11c76c=JSON['parse'](_0x3e0ec6);this['lodash_set'](_0x11c76c,_0x3be89f,_0x1be063),_0x3202a4=this['setval'](JSON['stringify'](_0x11c76c),_0x3c486b);}catch(_0x2d74e9){const _0x256a17={};this['lodash_set'](_0x256a17,_0x3be89f,_0x1be063),_0x3202a4=this['setval'](JSON['stringify'](_0x256a17),_0x3c486b);}}else _0x3202a4=this['setval'](_0x1be063,_0x56eacf);return _0x3202a4;}['getval'](_0x260fda){return this['isSurge']()||this['isLoon']()?$persistentStore['read'](_0x260fda):this['isQuanX']()?$prefs['valueForKey'](_0x260fda):this['isNode']()?(this['data']=this['loaddata'](),this['data'][_0x260fda]):this['data']&&this['data'][_0x260fda]||null;}['setval'](_0x35ec09,_0x50c7cf){return this['isSurge']()||this['isLoon']()?$persistentStore['write'](_0x35ec09,_0x50c7cf):this['isQuanX']()?$prefs['setValueForKey'](_0x35ec09,_0x50c7cf):this['isNode']()?(this['data']=this['loaddata'](),this['data'][_0x50c7cf]=_0x35ec09,this['writedata'](),!0x0):this['data']&&this['data'][_0x50c7cf]||null;}['initGotEnv'](_0x153444){this['got']=this['got']?this['got']:require('got'),this['cktough']=this['cktough']?this['cktough']:require('tough-cookie'),this['ckjar']=this['ckjar']?this['ckjar']:new this['cktough']['CookieJar'](),_0x153444&&(_0x153444['headers']=_0x153444['headers']?_0x153444['headers']:{},void 0x0===_0x153444['headers']['Cookie']&&void 0x0===_0x153444['cookieJar']&&(_0x153444['cookieJar']=this['ckjar']));}['get'](_0xfaecac,_0x3d6366=()=>{}){_0xfaecac['headers']&&(delete _0xfaecac['headers']['Content-Type'],delete _0xfaecac['headers']['Content-Length']),this['isSurge']()||this['isLoon']()?(this['isSurge']()&&this['isNeedRewrite']&&(_0xfaecac['headers']=_0xfaecac['headers']||{},Object['assign'](_0xfaecac['headers'],{'X-Surge-Skip-Scripting':!0x1})),$httpClient['get'](_0xfaecac,(_0x3b2b37,_0x2496ae,_0xf08cb0)=>{!_0x3b2b37&&_0x2496ae&&(_0x2496ae['body']=_0xf08cb0,_0x2496ae['statusCode']=_0x2496ae['status']),_0x3d6366(_0x3b2b37,_0x2496ae,_0xf08cb0);})):this['isQuanX']()?(this['isNeedRewrite']&&(_0xfaecac['opts']=_0xfaecac['opts']||{},Object['assign'](_0xfaecac['opts'],{'hints':!0x1})),$task['fetch'](_0xfaecac)['then'](_0x483028=>{const {statusCode:_0x14c2e0,statusCode:_0x5e2b7a,headers:_0x5da7dd,body:_0x7cc5}=_0x483028;_0x3d6366(null,{'status':_0x14c2e0,'statusCode':_0x5e2b7a,'headers':_0x5da7dd,'body':_0x7cc5},_0x7cc5);},_0x2a8950=>_0x3d6366(_0x2a8950))):this['isNode']()&&(this['initGotEnv'](_0xfaecac),this['got'](_0xfaecac)['on']('redirect',(_0x4cf6c0,_0x4ea9b2)=>{try{if(_0x4cf6c0['headers']['set-cookie']){const _0x819d28=_0x4cf6c0['headers']['set-cookie']['map'](this['cktough']['Cookie']['parse'])['toString']();_0x819d28&&this['ckjar']['setCookieSync'](_0x819d28,null),_0x4ea9b2['cookieJar']=this['ckjar'];}}catch(_0x52abf7){this['logErr'](_0x52abf7);}})['then'](_0x280178=>{const {statusCode:_0x247826,statusCode:_0x127eb6,headers:_0x40eb72,body:_0xb66ace}=_0x280178;_0x3d6366(null,{'status':_0x247826,'statusCode':_0x127eb6,'headers':_0x40eb72,'body':_0xb66ace},_0xb66ace);},_0x419bd8=>{const {message:_0x5a4de1,response:_0x3f61a7}=_0x419bd8;_0x3d6366(_0x5a4de1,_0x3f61a7,_0x3f61a7&&_0x3f61a7['body']);}));}['post'](_0x31aebc,_0x387b05=()=>{}){if(_0x31aebc['body']&&_0x31aebc['headers']&&!_0x31aebc['headers']['Content-Type']&&(_0x31aebc['headers']['Content-Type']='application/x-www-form-urlencoded'),_0x31aebc['headers']&&delete _0x31aebc['headers']['Content-Length'],this['isSurge']()||this['isLoon']())this['isSurge']()&&this['isNeedRewrite']&&(_0x31aebc['headers']=_0x31aebc['headers']||{},Object['assign'](_0x31aebc['headers'],{'X-Surge-Skip-Scripting':!0x1})),$httpClient['post'](_0x31aebc,(_0x4b7bbb,_0x1193e3,_0x2989ee)=>{!_0x4b7bbb&&_0x1193e3&&(_0x1193e3['body']=_0x2989ee,_0x1193e3['statusCode']=_0x1193e3['status']),_0x387b05(_0x4b7bbb,_0x1193e3,_0x2989ee);});else if(this['isQuanX']())_0x31aebc['method']='POST',this['isNeedRewrite']&&(_0x31aebc['opts']=_0x31aebc['opts']||{},Object['assign'](_0x31aebc['opts'],{'hints':!0x1})),$task['fetch'](_0x31aebc)['then'](_0x26678=>{const {statusCode:_0x23e186,statusCode:_0x5f3496,headers:_0x2c9805,body:_0x3828f7}=_0x26678;_0x387b05(null,{'status':_0x23e186,'statusCode':_0x5f3496,'headers':_0x2c9805,'body':_0x3828f7},_0x3828f7);},_0x5b3721=>_0x387b05(_0x5b3721));else if(this['isNode']()){this['initGotEnv'](_0x31aebc);const {url:_0x31b48b,..._0x29033a}=_0x31aebc;this['got']['post'](_0x31b48b,_0x29033a)['then'](_0x9ee576=>{const {statusCode:_0x1f7e22,statusCode:_0x3bf2a5,headers:_0x365ffb,body:_0x4b9fdf}=_0x9ee576;_0x387b05(null,{'status':_0x1f7e22,'statusCode':_0x3bf2a5,'headers':_0x365ffb,'body':_0x4b9fdf},_0x4b9fdf);},_0x395ea5=>{const {message:_0x2580df,response:_0x557e35}=_0x395ea5;_0x387b05(_0x2580df,_0x557e35,_0x557e35&&_0x557e35['body']);});}}['time'](_0x246b65,_0x4ca887=null){const _0x3e8c9e=_0x4ca887?new Date(_0x4ca887):new Date();let _0x53fbfc={'M+':_0x3e8c9e['getMonth']()+0x1,'d+':_0x3e8c9e['getDate'](),'H+':_0x3e8c9e['getHours'](),'m+':_0x3e8c9e['getMinutes'](),'s+':_0x3e8c9e['getSeconds'](),'q+':Math['floor']((_0x3e8c9e['getMonth']()+0x3)/0x3),'S':_0x3e8c9e['getMilliseconds']()};/(y+)/['test'](_0x246b65)&&(_0x246b65=_0x246b65['replace'](RegExp['$1'],(_0x3e8c9e['getFullYear']()+'')['substr'](0x4-RegExp['$1']['length'])));for(let _0x499427 in _0x53fbfc)new RegExp('('+_0x499427+')')['test'](_0x246b65)&&(_0x246b65=_0x246b65['replace'](RegExp['$1'],0x1==RegExp['$1']['length']?_0x53fbfc[_0x499427]:('00'+_0x53fbfc[_0x499427])['substr']((''+_0x53fbfc[_0x499427])['length'])));return _0x246b65;}['msg'](_0x1f4907=_0x4dda18,_0x54857b='',_0x2ff031='',_0x32e0e6){const _0x6192b2=_0x3f0dcf=>{if(!_0x3f0dcf)return _0x3f0dcf;if('string'==typeof _0x3f0dcf)return this['isLoon']()?_0x3f0dcf:this['isQuanX']()?{'open-url':_0x3f0dcf}:this['isSurge']()?{'url':_0x3f0dcf}:void 0x0;if('object'==typeof _0x3f0dcf){if(this['isLoon']()){let _0x106d55=_0x3f0dcf['openUrl']||_0x3f0dcf['url']||_0x3f0dcf['open-url'],_0x508a1d=_0x3f0dcf['mediaUrl']||_0x3f0dcf['media-url'];return{'openUrl':_0x106d55,'mediaUrl':_0x508a1d};}if(this['isQuanX']()){let _0x555940=_0x3f0dcf['open-url']||_0x3f0dcf['url']||_0x3f0dcf['openUrl'],_0x27f859=_0x3f0dcf['media-url']||_0x3f0dcf['mediaUrl'];return{'open-url':_0x555940,'media-url':_0x27f859};}if(this['isSurge']()){let _0x493f02=_0x3f0dcf['url']||_0x3f0dcf['openUrl']||_0x3f0dcf['open-url'];return{'url':_0x493f02};}}};if(this['isMute']||(this['isSurge']()||this['isLoon']()?$notification['post'](_0x1f4907,_0x54857b,_0x2ff031,_0x6192b2(_0x32e0e6)):this['isQuanX']()&&$notify(_0x1f4907,_0x54857b,_0x2ff031,_0x6192b2(_0x32e0e6))),!this['isMuteLog']){let _0x156936=['','==============📣系统通知📣=============='];_0x156936['push'](_0x1f4907),_0x54857b&&_0x156936['push'](_0x54857b),_0x2ff031&&_0x156936['push'](_0x2ff031),console['log'](_0x156936['join']('\x0a')),this['logs']=this['logs']['concat'](_0x156936);}}['log'](..._0x15a4b8){_0x15a4b8['length']>0x0&&(this['logs']=[...this['logs'],..._0x15a4b8]),console['log'](_0x15a4b8['join'](this['logSeparator']));}['logErr'](_0x9848b9,_0x7705ff){const _0x43deed=!this['isSurge']()&&!this['isQuanX']()&&!this['isLoon']();_0x43deed?this['log']('','❗️'+this['name']+',\x20错误!',_0x9848b9['stack']):this['log']('','❗️'+this['name']+',\x20错误!',_0x9848b9);}['wait'](_0x1f3518){return new Promise(_0x2347ec=>setTimeout(_0x2347ec,_0x1f3518));}['done'](_0x30e4c7={}){const _0x3d20f9=new Date()['getTime'](),_0x3a7fe2=(_0x3d20f9-this['startTime'])/0x3e8;this['log']('','🔔'+this['name']+',\x20结束!\x20🕛\x20'+_0x3a7fe2+'\x20秒'),this['log'](),(this['isSurge']()||this['isQuanX']()||this['isLoon']())&&$done(_0x30e4c7);}}(_0x4dda18,_0x461f8a);}